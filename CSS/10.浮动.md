# 浮动及其形状

`float`属性适用于所有元素，不能继承

## 浮动

### 浮动的元素

- 浮动元素脱离了常规文档流，但对文档的其余内容仍有影响（其他内容围绕浮动元素流动）
- 浮动元素四周外边距不会合并
- 非置换元素设置浮动，需要为元素设置宽度

### 浮动详解

元素浮动后生成的都是块级框，和显示声明`display: block`没有区别

**浮动规则**

1. 浮动元素的左右边界不能超过容纳块的左右边界

2. 文档中前一个元素向左浮动，后面浮动元素的左边界必定在前一个元素右边界的右侧，除非一行放不下，若前一个元素向右浮动，后面浮动元素的右边界必定在前一个元素左边界的左侧

3. 左浮动元素的右边界不能在右浮动元素的左边界的右侧，右浮动元素的左边界不能在左浮动元素的右边界的左侧
4. 浮动元素的顶边不能比父元素的内顶边高
5. 浮动元素的顶边不能比前方任何一个浮动元素或块级元素的顶边高
6. 浮动元素的顶边不能高于文档源码中出现的浮动元素之前的元素生成的框体所在的行框的顶边
7. 左浮动元素的左边如果还有一个向左浮动的元素，那么它的右边界不能再容纳块右边界的右侧，右浮动元素的右边如果还有一个向右浮动的元素，那么它的右边界不能在容纳块左边界的左侧
8. 浮动元素必须放在尽可能高的位置上
9. 左浮动元素必须尽量向左移动，右浮动元素必须尽量向右移动

### 具体行为

- 浮动元素的后代也浮动时，将扩大范围，涵盖浮动的后代元素。若想让元素随父元素一起浮动，可以浮动父元素
- 负外边距将导致浮动元素移到父元素的外面

### 浮动元素与内容重叠

- 行内框与浮动元素重叠时，其边框，背景和内容都在浮动元素之上渲染
- 块级框与浮动元素重叠时，其边框和背景在浮动元素之下渲染，而内容在浮动元素之上渲染

## 清除浮动

`clear`属性适用于块级元素，不能继承

```css
h3{
	clear: left; // 可以理解为确保h3元素的左边远离浮动元素
}
```

`clear`属性起作用的方式是增加元素的上外边距，因此为元素声明的上外边距会被忽略，可以在浮动元素上加下外边距解决这个问题

## 浮动形状

浮动形状属性可以改变浮动框的形状

### 定义形状

`shape-outside`用于定义浮动框的形状，适用于浮动元素，不能继承

取值：<basic-shape> | <shape-box> | <image>

**如果使用带透明区域的<image>，则内容将流入**

**basic-shape**

| 值        | 描述                                                         |
| --------- | ------------------------------------------------------------ |
| inset()   | 从形状边框各边向内偏移的距离，可用一个到四个长度或百分数值，以及一个可选的圆角值 |
| circle()  | 在浮动框中形成一个圆形的形状，可以设置半径，还有形状在浮动框中的位置 |
| ellipse() | 在浮动框中形成一个椭圆形的形状，可以设置x轴半径和y轴半径，还有形状在浮动框中的位置 |
| polygon() | 多边形形状由一系列逗号分隔的x y坐标定义和填充规则组成        |

```css
shape-outside: inset(2.5em) padding-box; // 形状从内边距框开始偏移2.5em
shape-outside: inset(2.5em round 5px); // 形状向内偏移2.5em并且右5px的圆角

shape-outside: circle(25px at center)
shape-outside: ellipse(25px 35px at top left)

polygon(nonzero,25px 0, 50px 25px,25px 50px, 0 25px)
polygon(evenodd,25px 0, 50px 25px,25px 50px, 0 25px)
```

**shape-box**

| 值          |
| ----------- |
| margin-box  |
| border-box  |
| padding-box |
| content-box |

### 使用透明图像定义形状

`shape-image-threshold`适用于浮动元素，不能继承

**这个属性用于指定透明度为多少时允许内容流入**

```
shape-image-threshold: 0.5; //当图像中透明度超过50%的部分将允许内容流入
```

